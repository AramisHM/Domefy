<!--
File: spaceship_controls.html
Project: FpMED - Framework for Distributed Multiprojection Systems
File Created: Tuesday, 30th July 2019 3:24:20 pm
Author: Aramis Hornung Moraes (aramishm@gmail.com)
-----
Last Modified: Tuesday, 30th July 2019 3:24:34 pm
Modified By: Aramis Hornung Moraes (aramishm@gmail.com>)
-----
Copyright 2014 - 2019 Aramis Hornung Moraes
-->

<!-- touch Joystick controls prototype -->
<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
    /* class to disable scrolling in the page */
    .noScroll {
        overflow-y: hidden;
        overscroll-behavior: none;
    }

    /* The region with for the touch enabled input */
    .joystick {
        width: 300px;
        height: 300px;
        border: 1px solid;

        z-index: 2;
    }

    /*  the image with the image for representing the joystick thumb */
    .joystick-point {}
</style>

<body class="noScroll">
    <p id="demo">
        position display for debug!
    </p>
    <div class="joystick" ontouchmove="showCoordinates(event)">
        <img id="thumbstickpointer" style="position:absolute" src=" ../../assets/images/marker.png">
        </img>
    </div>

    <button data-toggle-fullscreen>Toggle Fullscreen</button>

    <script>

        //  keeps track of ou gestures deslocation
        var touchHistoryData = {
            position: {
                x: 0,
                y: 0
            },
            touch_start: {
                x: 0,
                y: 0
            }
        }
        window.addEventListener('touchstart', function (event) {
            touchHistoryData.touch_start.x = event.touches[0].clientX;
            touchHistoryData.touch_start.y = event.touches[0].clientY;
        });

        // get the touch event input
        function showCoordinates(event) {
            var x = Math.round(event.touches[0].clientX);
            var y = Math.round(event.touches[0].clientY);

            var thumb = document.getElementById("thumbstickpointer");



            thumb.style.position = "absolute";
            thumb.style.left = x + "px";
            thumb.style.top = y + "px";

            touchHistoryData.last_pos = touchHistoryData.position
            touchHistoryData.position.x = x;
            touchHistoryData.position.y = y;

            var mx = Math.floor(x - touchHistoryData.touch_start.x);
            var my = Math.floor(y - touchHistoryData.touch_start.y);

            document.getElementById("demo").innerHTML = x + ", " + y + " desloc = x: " + mx + " y:" + my;

        }

        document.addEventListener('click', function (event) {
            // Ignore clicks that weren't on the toggle button
            if (!event.target.hasAttribute('data-toggle-fullscreen')) return;

            // If there's an element in fullscreen, exit
            // Otherwise, enter it
            if (document.fullscreenElement) {
                document.exitFullscreen();
            } else {
                document.documentElement.requestFullscreen();
            }
        }, false);
    </script>
</body>

</html>